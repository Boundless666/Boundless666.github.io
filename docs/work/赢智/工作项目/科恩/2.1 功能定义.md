## 采购排程

#### 主界面：采购排程单

> 展示排程单信息

(集合中的每一项信息如下)

| id       | orderCode           | prod         | prodName | startDate                      | endDate                          | realEndDate                      | finishRate | level    |
| -------- | ------------------- | ------------ | -------- | ------------------------------ | -------------------------------- | -------------------------------- | ---------- | -------- |
| 排程单id | 单号(任务单/计划单) | **成品**品号 | 成品品名 | BOM子件中 最先开始的那一个时间 | BOM子件中 最后计划结束的那个时间 | BOM子件中 最后实际结束的那个时间 | 完成率     | 重要程度 |

完成率计算公式:

$$完成率 = {(所有子件中实际结束时间 < 当前时间)的数量 \over 所有子件的数量}$$



##### 主界面-按钮-新增：

> 点击新增按钮 展示弹窗 

1. 检索栏  检索订单号(任务单/计划单)  带出该品号BOM子件信息(集合中的每一项信息如下)

| prod     | prodName | startDate    | endDate      | realEndDate  | finishRate                   | level    | isSchedule         |
| -------- | -------- | ------------ | ------------ | ------------ | ---------------------------- | -------- | ------------------ |
| 子件品号 | 子件品名 | 开始采购日期 | 计划到货日期 | 时间到货日期 | 多批交货就会存在完成率的情况 | 重要程度 | 这个单子是否排程过 |

完成率计算公式:

$$完成率 = \frac{(已经收货的数量)}{总采购数量}$$

**注意： 带出该单据的成品品号的BOM子件信息时有两个情况**

1. 这个单据的这个品号还没有生成过排程信息
    1. 此时就直接从erp数据中抓取
2. 这个单据的这个成品品号已经生成过排程信息了
    1. 此时数据来源就是MES中存入的排程信息了

2024-04-07



保存：

将上述排程数据存入MES排程中

##### 主界面-按钮-修改：

> 选中一行 点击修改 展示弹窗

1. 读取该单号的排程信息(MES中读取)
2. 修改保存(比如修改排程交期)





| 物料名称 | 版面编号   | 品号    | 拼版个数 | 版面数 | 强度 |
| -------- | ---------- | ------- | -------- | ------ | ---- |
| 材料aaa  | KK24032203 | 0120911 | 10       | 35     | 2000 |
| 材料bbb  | KK24032202 | 0120914 | 21       | 35     | 2000 |
| 材料ccc  | KK24032205 | 0120915 | 4        | 35     | 2000 |

